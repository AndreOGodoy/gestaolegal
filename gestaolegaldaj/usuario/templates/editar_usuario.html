{% extends "base_dashboard.html" %}
{% set eh_perfil_proprio = current_user.id == id_user %}
{%block titulo%}Edição de usuário{%endblock%}

{% block conteudo %}

<div class="card pessoa" id = "pessoa">
    <div class="card-body">
        <div class="row justify-content-between">
            <h3>Editar {{'meu perfil' if eh_perfil_proprio else 'usuário'}}</h3>
            {% if id_user == id_usuario_logado %}
                <form action="{{url_for('usuario.editar_senha_usuario')}}">
                    <button type="submit" class="btn btn-primary btn-block" >Alterar senha</button>
                </form>
            {% endif %}
        </div>

        <div class= "form-validation">
            <form class="form-valide" action="#" method="POST" id="form">
                <input type="hidden" id="emailAtual" name="emailAtual" value="{{entidade_usuario.email}}">

                {{ form.csrf_token }}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="nome">{{form.nome.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.nome(type="text", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.nome.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="email">{{form.email.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.email(type="email", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.email.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                {% if current_user.urole == 'admin' %}
                <div class="form-group row">
                    <label class="col-lg-4 col-form-label"  for="urole">{{form.urole.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.urole(class_="form-control")}}
                    </div>
                </div>

                {% for error in form.urole.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}
                {% endif %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="sexo">{{form.sexo.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.sexo(class_="form-control")}}
                    </div>
                </div>

                {% for error in form.sexo.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="estado_civil">{{form.estado_civil.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.estado_civil(class_="form-control")}}
                    </div>
                </div>

                {% for error in form.estado_civil.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="rg">{{form.rg.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.rg(type="text", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.rg.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="nascimento">{{form.nascimento.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.nascimento(type="date", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.nascimento.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="data_entrada">{{form.data_entrada.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.data_entrada(type="date", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.data_entrada.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="data_saida">{{form.data_saida.label}}
                    </label>
                    <div class="col-lg-6">
                        {{form.data_saida(type="date", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.data_saida.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="cpf"  maxlength = "14">{{form.cpf.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.cpf(type="text", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.cpf.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="profissao">{{form.profissao.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.profissao(type="text", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.profissao.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="telefone">{{form.telefone.label}}
                    </label>
                    <div class="col-lg-6">
                        {{form.telefone(type="text", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.telefone.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="celular" >{{form.celular.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.celular(type="text", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.celular.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="oab"  maxlength = "14">{{form.oab.label}}
                    </label>
                    <div class="col-lg-6">
                        {{form.oab(type="text", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.oab.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="matricula" >{{form.matricula.label}}
                    </label>
                    <div class="col-lg-6">
                        {{form.matricula(type="text", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.matricula.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="bolsista">{{form.bolsista.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.bolsista(class_="form-control")}}
                    </div>
                </div>

                {% for error in form.bolsista.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row" id = "div_tipo_bolsa" hidden ="true">
                    <label class="col-lg-4 col-form-label" for="tipo_bolsa">{{form.tipo_bolsa.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.tipo_bolsa(class_="form-control")}}
                    </div>
                </div>

                {% for error in form.tipo_bolsa.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row" id ="div_inicio_bolsa" hidden = "true">
                    <label class="col-lg-4 col-form-label" for="inicio_bolsa" >{{form.inicio_bolsa.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.inicio_bolsa(type="date",class_="form-control")}}
                    </div>
                </div>

                {% for error in form.inicio_bolsa.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row" id = "div_fim_bolsa" hidden="true">
                    <label class="col-lg-4 col-form-label" for="fim_bolsa" >{{form.fim_bolsa.label}}<span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.fim_bolsa(type="date", class_="form-control")}}
                    </div>
                </div>

                {% for error in form.fim_bolsa.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="horario_atendimento">{{form.horario_atendimento.label}}
                    </label>
                    <div class="col-lg-6">
                        {{form.horario_atendimento(class_="form-control")}}
                    </div>
                </div>

                {% for error in form.horario_atendimento.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="suplente">{{form.suplente.label}}
                    </label>
                    <div class="col-lg-6">
                        {{form.suplente(type="text",class_="form-control")}}
                    </div>
                </div>

                {% for error in form.suplente.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="ferias">{{form.ferias.label}}
                    </label>
                    <div class="col-lg-6">
                        {{form.ferias(type="text",class_="form-control")}}
                    </div>
                </div>

                {% for error in form.ferias.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="cert_atuacao_DAJ">{{form.cert_atuacao_DAJ.label}}
                    </label>
                    <div class="col-lg-6">
                        {{form.cert_atuacao_DAJ(class_="form-control")}}
                    </div>
                </div>

                {% for error in form.cert_atuacao_DAJ.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}
<!--------------------------------------------------------------------------------------ENDERECO------------------------------------------------------------------------------>
                <div class="form-group row" ><h3>Endereço</h3></div>

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="logradouro">{{form.logradouro.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.logradouro(type="text",class_="form-control")}}
                    </div>
                </div>

                {% for error in form.logradouro.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row" >
                    <label class="col-lg-4 col-form-label" for="numero" >{{form.numero.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.numero(type="text",class_="form-control")}}
                    </div>
                </div>

                {% for error in form.numero.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="bairro">{{form.bairro.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.bairro(type="text",class_="form-control")}}
                    </div>
                </div>

                {% for error in form.bairro.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="cep" >{{form.cep.label}} <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-6">
                        {{form.cep(type="text",class_="form-control")}}
                    </div>
                </div>

                {% for error in form.cep.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}

                <div class="form-group row">
                    <label class="col-lg-4 col-form-label" for="complemento">{{form.complemento.label}}</label>
                    <div class="col-lg-6">
                        {{form.complemento(type="text",class_="form-control")}}
                    </div>
                </div>

                {% for error in form.complemento.errors %}
                    <div class="alert alert-danger">{{error}}</div>
                {% endfor %}
<!--------------------------------------------------------------------------------------ENDERECO------------------------------------------------------------------------------>
                <button type="submit" class="btn btn-primary" id="button">Atualizar</button>
            </form>

        </div>
    </div>
</div>
{% endblock %}



{% block scripts %}
<script src="{{url_for('static',filename='js/form_utils.js')}}"></script>
<script src="{{url_for('static',filename='js/usuarioForm_utils.js')}}"></script>
<script>
    trataBotaoForm();

    //CHAMO A VALIDACAO
    validarCampoBolsista();

    //LINKO A VALIDACAO AO CAMPO bolsista
    document.getElementById('bolsista').onchange = function() {validarCampoBolsista()};
</script>
{%endblock%}
